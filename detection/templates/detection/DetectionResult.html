{% extends "base.html" %}

{% block title %}복약판별{% endblock %}

{% block content %}
<div class="card mx-auto border-light" style="width: 50rem;">
    <div id="carousel-a" class="carousel slide carousel-fade" data-ride="carousel">
        <!--indicators -->
        <ol class="carousel-indicators">
            {% for object in object_list %}
            {% if loop.index0 == 0 %}
            <li data-target="#carousel-a" data-slide-to="{{loop.index0}}" class="active">
<!--                <img src="/static/result/{{object}}" class="d-block w-100" alt="...">-->
            </li>
            {% else %}
            <li data-target="#carousel-a" data-slide-to="{{loop.index0}}">
<!--                <img src="/static/result/{{object}}" class="d-block w-100" alt="...">-->
            </li>
            {% endif %}
            {% endfor %}
        </ol>
        <!-- images -->
        <div class="carousel-inner">
            {% for object in object_list %}
            {% if loop.index == 1 %}
            <div class="carousel-item active">
                <img src="/static/result/{{object}}" class="d-block w-100" alt="...">
                <div class="card-header bg-white">
                    <p class="card-text">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Name</th>
                            <th scope="col">Score</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for item in object_list[object] %}
                        <tr>
                            <th scope="row">{{loop.index}}</th>
                            <td scope="row">{{object_list[object][item].name}}</td>
                            <td>{{object_list[object][item].score}}</td>
                        </tr>

                        {% endfor %}
                        </tbody>
                        <tbody>
                        <tr>
                            <th scope="row">알약개수</th>
                            <th scope="row">{{count_pills[loop.index - 1]}}</th>
                        </tr>
                        </tbody>
                    </table>
                    </p>
                </div>
            </div>
            {% else %}
            <div class="carousel-item">
                <img src="/static/result/{{object}}" class="d-block w-100" alt="...">
                <div class="card-header bg-white">
                    <p class="card-text">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Name</th>
                            <th scope="col">Score</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for item in object_list[object] %}
                        <tr>
                            <th scope="row">{{loop.index}}</th>
                            <td scope="row">{{object_list[object][item].name}}</td>
                            <td>{{object_list[object][item].score}}</td>
                        </tr>

                        {% endfor %}
                        </tbody>
                        <tbody>
                        <tr>
                            <th scope="row">알약개수</th>
                            <th scope="row">{{count_pills[loop.index - 1]}}</th>
                        </tr>
                        </tbody>
                    </table>
                    </p>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        <a class="carousel-control-prev" href="#carousel-a" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carousel-a" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    {% if result == 1%}
    <div class="card-body text-white bg-success" style="text-align: center">
        <p class="card-text mx-auto">
        <h1>복약</h1>
        <h1 class="bg-success">{{(hypothesis)|round(3, 'floor')}} %</h1>
        </p>
    </div>
    {% else %}
    <div class="card-body text-white bg-danger" style="text-align: center">
        <p class="card-text mx-auto">
        <h1>비복약</h1>
        <h1 class="bg-danger">{{(100 - hypothesis)|round(3, 'floor')}} %</h1>
        </p>
    </div>
    {% endif %}
<!--    <ul class="list-group list-group-flush mx-auto">-->
<!--        <li class="list-group-item">{{hypothesis}}</li>-->
<!--    </ul>-->
<!--    <button type="button" onclick="location.href='http://222.122.196.217:5005/detection_test'"-->
<!--            class="btn btn-primary btn-sm">분석하기-->
<!--    </button>-->
</div>

<script src="/static/js/image_list.js"></script>

{% endblock %}